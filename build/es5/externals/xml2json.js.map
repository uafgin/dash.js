{"version":3,"sources":["../../../externals/xml2json.js"],"names":["X2JS","config","VERSION","initConfigDefaults","initRequiredPolyfills","escapeMode","undefined","attributePrefix","arrayAccessForm","emptyNodeForm","enableToStringFunc","arrayAccessFormPaths","skipEmptyTextNodesForObj","stripWhitespaces","datetimeAccessFormPaths","useDoubleQuotes","xmlElementsFilter","jsonPropertiesFilter","keepCData","ignoreRoot","DOMNodeTypes","ELEMENT_NODE","TEXT_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","getNodeLocalName","node","nodeLocalName","localName","baseName","nodeName","getNodePrefix","prefix","escapeXmlChars","str","replace","unescapeXmlChars","checkInStdFiltersArrayForm","stdFiltersArrayForm","obj","name","path","idx","length","filterPath","RegExp","test","toArrayAccessForm","childName","Array","fromXmlDateTime","prop","bits","split","d","Date","secondBits","setHours","setMilliseconds","offsetMinutes","Number","sign","setMinutes","getMinutes","getTimezoneOffset","indexOf","UTC","getFullYear","getMonth","getDate","getHours","getSeconds","getMilliseconds","checkFromXmlDateTimePaths","value","fullPath","checkXmlElementsFilter","childType","childPath","parseDOMChildren","nodeType","result","Object","nodeChildren","childNodes","cidx","child","__cnt","children","c","o","push","__children","aidx","attributes","attr","value2","m","ml","matchers","matchobj","converter","nodePrefix","__prefix","__text","join","trim","__cdata","toString","nodeValue","startTag","jsonObj","element","attrList","closed","resultStr","attrName","attrVal","substr","endTag","elementName","endsWith","suffix","jsonXmlSpecialElem","jsonObjField","Function","jsonXmlElemCount","elementsCnt","it","checkJsonObjPropertiesFilter","propertyName","jsonObjPath","parseJSONAttributes","ait","parseJSONTextAttrs","jsonTxtObj","parseJSONTextObject","getJsonPropertyPath","jsonPropName","parseJSONArray","jsonArrRoot","jsonArrObj","arIdx","parseJSONObject","subObj","toISOString","subObjElementsCnt","parseXmlString","xmlDocStr","isIEParser","window","ActiveXObject","xmlDoc","DOMParser","parser","parsererrorNS","parseFromString","getElementsByTagNameNS","err","async","loadXML","asArray","toXmlDateTime","dt","asDateTime","xml2json","xml_str2json","json2xml_str","json2xml","getVersion"],"mappings":"sEAAA;;;;;;;;;;;;;;;GAiBA;;;;;;;;EAUA,QAASA,KAAT,CAAcC,MAAd,CAAsB,CAClB,aAEA,GAAIC,SAAU,OAAd,CAEAD,OAASA,QAAU,EAAnB,CACAE,qBACAC,wBAEA,QAASD,mBAAT,EAA8B,CAC1B,GAAGF,OAAOI,UAAP,GAAsBC,SAAzB,CAAoC,CAChCL,OAAOI,UAAP,CAAoB,IAApB,CACH,CAED,GAAIJ,OAAOM,eAAP,GAA2BD,SAA/B,CAA0C,CACtCL,OAAOM,eAAP,CAAyB,GAAzB,CACH,CAEDN,OAAOO,eAAP,CAAyBP,OAAOO,eAAP,EAA0B,MAAnD,CACAP,OAAOQ,aAAP,CAAuBR,OAAOQ,aAAP,EAAwB,MAA/C,CAEA,GAAGR,OAAOS,kBAAP,GAA8BJ,SAAjC,CAA4C,CACxCL,OAAOS,kBAAP,CAA4B,IAA5B,CACH,CACDT,OAAOU,oBAAP,CAA8BV,OAAOU,oBAAP,EAA+B,EAA7D,CACA,GAAGV,OAAOW,wBAAP,GAAoCN,SAAvC,CAAkD,CAC9CL,OAAOW,wBAAP,CAAkC,IAAlC,CACH,CACD,GAAGX,OAAOY,gBAAP,GAA4BP,SAA/B,CAA0C,CACtCL,OAAOY,gBAAP,CAA0B,IAA1B,CACH,CACDZ,OAAOa,uBAAP,CAAiCb,OAAOa,uBAAP,EAAkC,EAAnE,CAEA,GAAGb,OAAOc,eAAP,GAA2BT,SAA9B,CAAyC,CACrCL,OAAOc,eAAP,CAAyB,KAAzB,CACH,CAEDd,OAAOe,iBAAP,CAA2Bf,OAAOe,iBAAP,EAA4B,EAAvD,CACAf,OAAOgB,oBAAP,CAA8BhB,OAAOgB,oBAAP,EAA+B,EAA7D,CAEA,GAAGhB,OAAOiB,SAAP,GAAqBZ,SAAxB,CAAmC,CAC/BL,OAAOiB,SAAP,CAAmB,KAAnB,CACH,CAED,GAAIjB,OAAOkB,UAAP,GAAsBb,SAA1B,CAAqC,CACjCL,OAAOkB,UAAP,CAAoB,KAApB,CACH,CACJ,CAED,GAAIC,cAAe,CACfC,aAAmB,CADJ,CAEfC,UAAmB,CAFJ,CAGfC,mBAAqB,CAHN,CAIfC,aAAkB,CAJH,CAKfC,cAAoB,CALL,CAAnB,CAQA,QAASrB,sBAAT,EAAiC,CAChC,CAED,QAASsB,iBAAT,CAA2BC,IAA3B,CAAkC,CAC9B,GAAIC,eAAgBD,KAAKE,SAAzB,CACA,GAAGD,eAAiB,IAApB,CAA0B;AACtBA,cAAgBD,KAAKG,QAArB,CACJ,GAAGF,eAAiB,IAAjB,EAAyBA,eAAe,EAA3C,CAA+C;AAC3CA,cAAgBD,KAAKI,QAArB,CACJ,MAAOH,cAAP,CACH,CAED,QAASI,cAAT,CAAuBL,IAAvB,CAA6B,CACzB,MAAOA,MAAKM,MAAZ,CACH,CAED,QAASC,eAAT,CAAwBC,GAAxB,CAA6B,CACzB,GAAG,MAAOA,IAAP,EAAe,QAAlB,CACI,MAAOA,KAAIC,OAAJ,CAAY,IAAZ,CAAkB,OAAlB,EAA2BA,OAA3B,CAAmC,IAAnC,CAAyC,MAAzC,EAAiDA,OAAjD,CAAyD,IAAzD,CAA+D,MAA/D,EAAuEA,OAAvE,CAA+E,IAA/E,CAAqF,QAArF,EAA+FA,OAA/F,CAAuG,IAAvG,CAA6G,QAA7G,CAAP,CADJ,IAGI,OAAOD,IAAP,CACP,CAED,QAASE,iBAAT,CAA0BF,GAA1B,CAA+B,CAC3B,MAAOA,KAAIC,OAAJ,CAAY,OAAZ,CAAqB,GAArB,EAA0BA,OAA1B,CAAkC,OAAlC,CAA2C,GAA3C,EAAgDA,OAAhD,CAAwD,SAAxD,CAAmE,GAAnE,EAAwEA,OAAxE,CAAgF,SAAhF,CAA2F,GAA3F,EAAgGA,OAAhG,CAAwG,QAAxG,CAAkH,GAAlH,CAAP,CACH,CAED,QAASE,2BAAT,CAAoCC,mBAApC,CAAyDC,GAAzD,CAA8DC,IAA9D,CAAoEC,IAApE,CAA0E,CACtE,GAAIC,KAAM,CAAV,CACA,KAAMA,IAAMJ,oBAAoBK,MAAhC,CAAwCD,KAAxC,CAA+C,CAC3C,GAAIE,YAAaN,oBAAoBI,GAApB,CAAjB,CACA,GAAI,MAAOE,WAAP,GAAsB,QAA1B,CAAqC,CACjC,GAAGA,YAAcH,IAAjB,CACI,MACP,CAHD,IAKA,IAAIG,qBAAsBC,OAA1B,CAAkC,CAC9B,GAAGD,WAAWE,IAAX,CAAgBL,IAAhB,CAAH,CACI,MACP,CAHD,IAKA,IAAI,MAAOG,WAAP,GAAsB,UAA1B,CAAsC,CAClC,GAAGA,WAAWL,GAAX,CAAgBC,IAAhB,CAAsBC,IAAtB,CAAH,CACI,MACP,CACJ,CACD,MAAOC,MAAKJ,oBAAoBK,MAAhC,CACH,CAED,QAASI,kBAAT,CAA2BR,GAA3B,CAAgCS,SAAhC,CAA2CP,IAA3C,CAAiD,CAC7C,OAAOzC,OAAOO,eAAd,EACI,IAAK,UAAL,CACI,GAAG,EAAEgC,IAAIS,SAAJ,WAA0BC,MAA5B,CAAH,CACIV,IAAIS,UAAU,UAAd,EAA4B,CAACT,IAAIS,SAAJ,CAAD,CAA5B,CADJ,IAGIT,KAAIS,UAAU,UAAd,EAA4BT,IAAIS,SAAJ,CAA5B,CACJ,MACJ;wBAPJ,CAWA,GAAG,EAAET,IAAIS,SAAJ,WAA0BC,MAA5B,GAAsCjD,OAAOU,oBAAP,CAA4BiC,MAA5B,CAAqC,CAA9E,CAAiF,CAC7E,GAAGN,2BAA2BrC,OAAOU,oBAAlC,CAAwD6B,GAAxD,CAA6DS,SAA7D,CAAwEP,IAAxE,CAAH,CAAkF,CAC9EF,IAAIS,SAAJ,EAAiB,CAACT,IAAIS,SAAJ,CAAD,CAAjB,CACH,CACJ,CACJ,CAED,QAASE,gBAAT,CAAyBC,IAAzB,CAA+B,CAC3B;AACA;AACA,GAAIC,MAAOD,KAAKE,KAAL,CAAW,UAAX,CAAX,CAEA,GAAIC,GAAI,GAAIC,KAAJ,CAASH,KAAK,CAAL,CAAT,CAAkBA,KAAK,CAAL,EAAQ,CAA1B,CAA6BA,KAAK,CAAL,CAA7B,CAAR,CACA,GAAII,YAAaJ,KAAK,CAAL,EAAQC,KAAR,CAAc,IAAd,CAAjB,CACAC,EAAEG,QAAF,CAAWL,KAAK,CAAL,CAAX,CAAoBA,KAAK,CAAL,CAApB,CAA6BI,WAAW,CAAX,CAA7B,EACA,GAAGA,WAAWb,MAAX,CAAkB,CAArB,CACIW,EAAEI,eAAF,CAAkBF,WAAW,CAAX,CAAlB,EAEJ;AACA,GAAGJ,KAAK,CAAL,GAAWA,KAAK,CAAL,CAAd,CAAuB,CACnB,GAAIO,eAAgBP,KAAK,CAAL,EAAU,EAAV,CAAeQ,OAAOR,KAAK,CAAL,CAAP,CAAnC,CACA,GAAIS,MAAO,kBAAkBf,IAAlB,CAAuBK,IAAvB,EAA8B,GAA9B,CAAoC,GAA/C,CAEA;AACAQ,cAAgB,GAAKE,MAAQ,GAAR,CAAa,CAAC,CAAD,CAAKF,aAAlB,CAAkCA,aAAvC,CAAhB,CAEA;AACAL,EAAEQ,UAAF,CAAaR,EAAES,UAAF,GAAiBJ,aAAjB,CAAiCL,EAAEU,iBAAF,EAA9C,EACH,CATD,IAWI,IAAGb,KAAKc,OAAL,CAAa,GAAb,CAAkBd,KAAKR,MAAL,CAAc,CAAhC,IAAuC,CAAC,CAA3C,CAA8C,CAC1CW,EAAI,GAAIC,KAAJ,CAASA,KAAKW,GAAL,CAASZ,EAAEa,WAAF,EAAT,CAA0Bb,EAAEc,QAAF,EAA1B,CAAwCd,EAAEe,OAAF,EAAxC,CAAqDf,EAAEgB,QAAF,EAArD,CAAmEhB,EAAES,UAAF,EAAnE,CAAmFT,EAAEiB,UAAF,EAAnF,CAAmGjB,EAAEkB,eAAF,EAAnG,CAAT,CAAJ,CACH,CAEL;AACA,MAAOlB,EAAP,CACH,CAED,QAASmB,0BAAT,CAAmCC,KAAnC,CAA0C1B,SAA1C,CAAqD2B,QAArD,CAA+D,CAC3D,GAAG3E,OAAOa,uBAAP,CAA+B8B,MAA/B,CAAwC,CAA3C,CAA8C,CAC1C,GAAIF,MAAOkC,SAAStB,KAAT,CAAe,KAAf,EAAsB,CAAtB,CAAX,CACA,GAAGhB,2BAA2BrC,OAAOa,uBAAlC,CAA2D6D,KAA3D,CAAkE1B,SAAlE,CAA6EP,IAA7E,CAAH,CAAuF,CACnF,MAAOS,iBAAgBwB,KAAhB,CAAP,CACH,CAFD,IAII,OAAOA,MAAP,CACP,CAPD,IASI,OAAOA,MAAP,CACP,CAED,QAASE,uBAAT,CAAgCrC,GAAhC,CAAqCsC,SAArC,CAAgD7B,SAAhD,CAA2D8B,SAA3D,CAAsE,CAClE,GAAID,WAAa1D,aAAaC,YAA1B,EAA0CpB,OAAOe,iBAAP,CAAyB4B,MAAzB,CAAkC,CAAhF,CAAmF,CAC/E,MAAON,4BAA2BrC,OAAOe,iBAAlC,CAAqDwB,GAArD,CAA0DS,SAA1D,CAAqE8B,SAArE,CAAP,CACH,CAFD,IAII,OAAO,KAAP,CACP,CAED,QAASC,iBAAT,CAA2BrD,IAA3B,CAAiCe,IAAjC,CAAwC,CACpC,GAAGf,KAAKsD,QAAL,EAAiB7D,aAAaK,aAAjC,CAAgD,CAC5C,GAAIyD,QAAS,GAAIC,OAAJ,EAAb,CACA,GAAIC,cAAezD,KAAK0D,UAAxB,CACA;AACA,IAAI,GAAIC,MAAK,CAAb,CAAgBA,KAAMF,aAAaxC,MAAnC,CAA2C0C,MAA3C,CAAmD,CAC/C,GAAIC,OAAQH,aAAaE,IAAb,CAAZ,CACA,GAAGC,MAAMN,QAAN,EAAkB7D,aAAaC,YAAlC,CAAgD,CAC5C,GAAIpB,OAAOkB,UAAX,CAAuB,CACnB+D,OAASF,iBAAiBO,KAAjB,CAAT,CACH,CAFD,IAEO,CACHL,OAAS,EAAT,CACA,GAAIjC,WAAYvB,iBAAiB6D,KAAjB,CAAhB,CACAL,OAAOjC,SAAP,EAAoB+B,iBAAiBO,KAAjB,CAApB,CACH,CACJ,CACJ,CACD,MAAOL,OAAP,CACH,CAjBD,IAmBA,IAAGvD,KAAKsD,QAAL,EAAiB7D,aAAaC,YAAjC,CAA+C,CAC3C,GAAI6D,QAAS,GAAIC,OAAJ,EAAb,CACAD,OAAOM,KAAP,CAAa,CAAb,CAEA,GAAIC,UAAW,EAAf,CACA,GAAIL,cAAezD,KAAK0D,UAAxB,CAEA;AACA,IAAI,GAAIC,MAAK,CAAb,CAAgBA,KAAMF,aAAaxC,MAAnC,CAA2C0C,MAA3C,CAAmD,CAC/C,GAAIC,OAAQH,aAAaE,IAAb,CAAZ,CACA,GAAIrC,WAAYvB,iBAAiB6D,KAAjB,CAAhB,CAEA,GAAGA,MAAMN,QAAN,EAAiB7D,aAAaI,YAAjC,CAA+C,CAC3C,GAAIuD,WAAYrC,KAAK,GAAL,CAASO,SAAzB,CACA,GAAI4B,uBAAuBK,MAAvB,CAA8BK,MAAMN,QAApC,CAA6ChC,SAA7C,CAAuD8B,SAAvD,CAAJ,CAAuE,CACnEG,OAAOM,KAAP,GACA,GAAGN,OAAOjC,SAAP,GAAqB,IAAxB,CAA8B,CAC1B,GAAIyC,GAAIV,iBAAiBO,KAAjB,CAAwBR,SAAxB,CAAR,CACA,GAAI9B,WAAa,OAAb,EAAwB,QAAQF,IAAR,CAAa2C,CAAb,CAA5B,CAA6C,CACzC,GAAIC,GAAI,EAAR,CACAA,EAAE1C,SAAF,EAAeyC,CAAf,CACAD,SAASG,IAAT,CAAcD,CAAd,EACH,CACDT,OAAOjC,SAAP,EAAoByC,CAApB,CACA1C,kBAAkBkC,MAAlB,CAA0BjC,SAA1B,CAAqC8B,SAArC,EACH,CATD,IAUK,CACD,GAAGG,OAAOjC,SAAP,GAAqB,IAAxB,CAA8B,CAC1B,GAAI,EAAEiC,OAAOjC,SAAP,WAA6BC,MAA/B,CAAJ,CAA2C,CACvCgC,OAAOjC,SAAP,EAAoB,CAACiC,OAAOjC,SAAP,CAAD,CAApB,CACAD,kBAAkBkC,MAAlB,CAA0BjC,SAA1B,CAAqC8B,SAArC,EACH,CACJ,CAED,GAAIW,GAAIV,iBAAiBO,KAAjB,CAAwBR,SAAxB,CAAR,CACA,GAAI9B,WAAa,OAAb,EAAwB,QAAQF,IAAR,CAAa2C,CAAb,CAA5B,CAA6C,CAAE;AAC3C,GAAIC,GAAI,EAAR,CACAA,EAAE1C,SAAF,EAAeyC,CAAf,CACAD,SAASG,IAAT,CAAeD,CAAf,EACH,CACAT,OAAOjC,SAAP,CAAD,CAAoBiC,OAAOjC,SAAP,EAAkBL,MAAtC,EAAgD8C,CAAhD,CACH,CACJ,CACJ,CACJ,CAEDR,OAAOW,UAAP,CAAoBJ,QAApB,CAEA;AACA,GAAI7D,eAAgBF,iBAAiBC,IAAjB,CAApB,CACA,IAAI,GAAImE,MAAK,CAAb,CAAgBA,KAAMnE,KAAKoE,UAAL,CAAgBnD,MAAtC,CAA8CkD,MAA9C,CAAsD,CAClD,GAAIE,MAAOrE,KAAKoE,UAAL,CAAgBD,IAAhB,CAAX,CACAZ,OAAOM,KAAP,GAEA,GAAIS,QAASD,KAAKrB,KAAlB,CACA,IAAI,GAAIuB,GAAE,CAAN,CAASC,GAAGlG,OAAOmG,QAAP,CAAgBxD,MAAhC,CAAwCsD,EAAIC,EAA5C,CAAgDD,GAAhD,CAAqD,CACjD,GAAIG,UAAWpG,OAAOmG,QAAP,CAAgBF,CAAhB,CAAf,CACA,GAAIG,SAAStD,IAAT,CAAciD,IAAd,CAAoBpE,aAApB,CAAJ,CACIqE,OAASI,SAASC,SAAT,CAAmBN,KAAKrB,KAAxB,CAAT,CACP,CAEDO,OAAOjF,OAAOM,eAAP,CAAuByF,KAAKvD,IAAnC,EAAyCwD,MAAzC,CACH,CAED;AACA,GAAIM,YAAavE,cAAcL,IAAd,CAAjB,CACA,GAAG4E,YAAY,IAAZ,EAAoBA,YAAY,EAAnC,CAAuC,CACnCrB,OAAOM,KAAP,GACAN,OAAOsB,QAAP,CAAgBD,UAAhB,CACH,CAED,GAAGrB,OAAO,OAAP,GAAiB,IAApB,CAA0B,CACtBA,OAAOuB,MAAP,CAAgBvB,OAAO,OAAP,CAAhB,CACA,GAAGA,OAAOuB,MAAP,WAAyBvD,MAA5B,CAAmC,CAC/BgC,OAAOuB,MAAP,CAAgBvB,OAAOuB,MAAP,CAAcC,IAAd,CAAmB,IAAnB,CAAhB,CACH,CACD;AACA;AACA,GAAGzG,OAAOY,gBAAV,CACIqE,OAAOuB,MAAP,CAAgBvB,OAAOuB,MAAP,CAAcE,IAAd,EAAhB,CACJ,MAAOzB,QAAO,OAAP,CAAP,CACA,GAAGjF,OAAOO,eAAP,EAAwB,UAA3B,CACI,MAAO0E,QAAO,eAAP,CAAP,CACJA,OAAOuB,MAAP,CAAgB/B,0BAA0BQ,OAAOuB,MAAjC,CAAyCxD,SAAzC,CAAoDP,KAAK,GAAL,CAASO,SAA7D,CAAhB,CACH,CACD,GAAGiC,OAAO,gBAAP,GAA0B,IAA7B,CAAmC,CAC/BA,OAAO0B,OAAP,CAAiB1B,OAAO,gBAAP,CAAjB,CACA,MAAOA,QAAO,gBAAP,CAAP,CACA,GAAGjF,OAAOO,eAAP,EAAwB,UAA3B,CACI,MAAO0E,QAAO,wBAAP,CAAP,CACP,CAED,GAAIA,OAAOM,KAAP,EAAgB,CAAhB,EAAqBvF,OAAOQ,aAAP,EAAsB,MAA/C,CAAwD,CACpDyE,OAAS,EAAT,CACH,CAFD,IAIA,IAAIA,OAAOM,KAAP,EAAgB,CAAhB,EAAqBN,OAAOuB,MAAP,EAAe,IAAxC,CAAgD,CAC5CvB,OAASA,OAAOuB,MAAhB,CACH,CAFD,IAIA,IAAIvB,OAAOM,KAAP,EAAgB,CAAhB,EAAqBN,OAAO0B,OAAP,EAAgB,IAArC,EAA6C,CAAC3G,OAAOiB,SAAzD,CAAsE,CAClEgE,OAASA,OAAO0B,OAAhB,CACH,CAFD,IAIA,IAAK1B,OAAOM,KAAP,CAAe,CAAf,EAAoBN,OAAOuB,MAAP,EAAe,IAAnC,EAA2CxG,OAAOW,wBAAvD,CAAiF,CAC7E,GAAKX,OAAOY,gBAAP,EAA2BqE,OAAOuB,MAAP,EAAe,EAA3C,EAAmDvB,OAAOuB,MAAP,CAAcE,IAAd,IAAsB,EAA7E,CAAkF,CAC9E,MAAOzB,QAAOuB,MAAd,CACH,CACJ,CACD,MAAOvB,QAAOM,KAAd,CAEA,GAAIvF,OAAOS,kBAAP,GAA8BwE,OAAOuB,MAAP,EAAe,IAAf,EAAuBvB,OAAO0B,OAAP,EAAgB,IAArE,CAAJ,CAAiF,CAC7E1B,OAAO2B,QAAP,CAAkB,UAAW,CACzB,MAAO,CAAC,KAAKJ,MAAL,EAAa,IAAb,CAAmB,KAAKA,MAAxB,CAA+B,EAAhC,GAAsC,KAAKG,OAAL,EAAc,IAAd,CAAqB,KAAKA,OAA1B,CAAkC,EAAxE,CAAP,CACH,CAFD,CAGH,CAED,MAAO1B,OAAP,CACH,CAtHD,IAwHA,IAAGvD,KAAKsD,QAAL,EAAiB7D,aAAaE,SAA9B,EAA2CK,KAAKsD,QAAL,EAAiB7D,aAAaG,kBAA5E,CAAgG,CAC5F,MAAOI,MAAKmF,SAAZ,CACH,CACJ,CAED,QAASC,SAAT,CAAkBC,OAAlB,CAA2BC,OAA3B,CAAoCC,QAApC,CAA8CC,MAA9C,CAAsD,CAClD,GAAIC,WAAY,KAAQJ,SAAS,IAAT,EAAiBA,QAAQR,QAAR,EAAkB,IAApC,CAA4CQ,QAAQR,QAAR,CAAiB,GAA7D,CAAkE,EAAzE,EAA+ES,OAA/F,CACA,GAAGC,UAAU,IAAb,CAAmB,CACf,IAAI,GAAIpB,MAAO,CAAf,CAAkBA,KAAOoB,SAAStE,MAAlC,CAA0CkD,MAA1C,CAAkD,CAC9C,GAAIuB,UAAWH,SAASpB,IAAT,CAAf,CACA,GAAIwB,SAAUN,QAAQK,QAAR,CAAd,CACA,GAAGpH,OAAOI,UAAV,CACIiH,QAAQpF,eAAeoF,OAAf,CAAR,CACJF,WAAW,IAAIC,SAASE,MAAT,CAAgBtH,OAAOM,eAAP,CAAuBqC,MAAvC,CAAJ,CAAmD,GAA9D,CACA,GAAG3C,OAAOc,eAAV,CACIqG,WAAW,IAAIE,OAAJ,CAAY,GAAvB,CADJ,IAGIF,YAAW,IAAIE,OAAJ,CAAY,GAAvB,CACP,CACJ,CACD,GAAG,CAACH,MAAJ,CACIC,WAAW,GAAX,CADJ,IAGIA,YAAW,IAAX,CACJ,MAAOA,UAAP,CACH,CAED,QAASI,OAAT,CAAgBR,OAAhB,CAAwBS,WAAxB,CAAqC,CACjC,MAAO,MAAOT,QAAQR,QAAR,EAAkB,IAAlB,CAAyBQ,QAAQR,QAAR,CAAiB,GAA1C,CAA+C,EAAtD,EAA0DiB,WAA1D,CAAsE,GAA7E,CACH,CAED,QAASC,SAAT,CAAkBvF,GAAlB,CAAuBwF,MAAvB,CAA+B,CAC3B,MAAOxF,KAAI+B,OAAJ,CAAYyD,MAAZ,CAAoBxF,IAAIS,MAAJ,CAAa+E,OAAO/E,MAAxC,IAAoD,CAAC,CAA5D,CACH,CAED,QAASgF,mBAAT,CAA8BZ,OAA9B,CAAuCa,YAAvC,CAAsD,CAClD,GAAI5H,OAAOO,eAAP,EAAwB,UAAxB,EAAsCkH,SAASG,aAAahB,QAAb,EAAT,CAAkC,UAAlC,CAAvC,EACQgB,aAAahB,QAAb,GAAwB3C,OAAxB,CAAgCjE,OAAOM,eAAvC,GAAyD,CADjE,EAEQsH,aAAahB,QAAb,GAAwB3C,OAAxB,CAAgC,IAAhC,GAAuC,CAF/C,EAGS8C,QAAQa,YAAR,WAAiCC,SAH7C,CAII,MAAO,KAAP,CAJJ,IAMI,OAAO,MAAP,CACP,CAED,QAASC,iBAAT,CAA4Bf,OAA5B,CAAsC,CAClC,GAAIgB,aAAc,CAAlB,CACA,GAAGhB,kBAAmB7B,OAAtB,CAA+B,CAC3B,IAAK,GAAI8C,GAAT,GAAejB,QAAf,CAA0B,CACtB,GAAGY,mBAAqBZ,OAArB,CAA8BiB,EAA9B,CAAH,CACI,SACJD,cACH,CACJ,CACD,MAAOA,YAAP,CACH,CAED,QAASE,6BAAT,CAAsClB,OAAtC,CAA+CmB,YAA/C,CAA6DC,WAA7D,CAA0E,CACtE,MAAOnI,QAAOgB,oBAAP,CAA4B2B,MAA5B,EAAsC,CAAtC,EACAwF,aAAa,EADb,EAEA9F,2BAA2BrC,OAAOgB,oBAAlC,CAAwD+F,OAAxD,CAAiEmB,YAAjE,CAA+EC,WAA/E,CAFP,CAGH,CAED,QAASC,oBAAT,CAA+BrB,OAA/B,CAAyC,CACrC,GAAIE,UAAW,EAAf,CACA,GAAGF,kBAAmB7B,OAAtB,CAA+B,CAC3B,IAAK,GAAImD,IAAT,GAAgBtB,QAAhB,CAA2B,CACvB,GAAGsB,IAAIzB,QAAJ,GAAe3C,OAAf,CAAuB,IAAvB,GAA+B,CAAC,CAAhC,EAAqCoE,IAAIzB,QAAJ,GAAe3C,OAAf,CAAuBjE,OAAOM,eAA9B,GAAgD,CAAxF,CAA2F,CACvF2G,SAAStB,IAAT,CAAc0C,GAAd,EACH,CACJ,CACJ,CACD,MAAOpB,SAAP,CACH,CAED,QAASqB,mBAAT,CAA8BC,UAA9B,CAA2C,CACvC,GAAItD,QAAQ,EAAZ,CAEA,GAAGsD,WAAW5B,OAAX,EAAoB,IAAvB,CAA6B,CACzB1B,QAAQ,YAAYsD,WAAW5B,OAAvB,CAA+B,KAAvC,CACH,CAED,GAAG4B,WAAW/B,MAAX,EAAmB,IAAtB,CAA4B,CACxB,GAAGxG,OAAOI,UAAV,CACI6E,QAAQhD,eAAesG,WAAW/B,MAA1B,CAAR,CADJ,IAGIvB,SAAQsD,WAAW/B,MAAnB,CACP,CACD,MAAOvB,OAAP,CACH,CAED,QAASuD,oBAAT,CAA+BD,UAA/B,CAA4C,CACxC,GAAItD,QAAQ,EAAZ,CAEA,GAAIsD,qBAAsBrD,OAA1B,CAAmC,CAC/BD,QAAQqD,mBAAqBC,UAArB,CAAR,CACH,CAFD,IAII,IAAGA,YAAY,IAAf,CAAqB,CACjB,GAAGvI,OAAOI,UAAV,CACI6E,QAAQhD,eAAesG,UAAf,CAAR,CADJ,IAGItD,SAAQsD,UAAR,CACP,CAEL,MAAOtD,OAAP,CACH,CAED,QAASwD,oBAAT,CAA6BN,WAA7B,CAA0CO,YAA1C,CAAwD,CACpD,GAAIP,cAAc,EAAlB,CAAsB,CAClB,MAAOO,aAAP,CACH,CAFD,IAII,OAAOP,aAAY,GAAZ,CAAgBO,YAAvB,CACP,CAED,QAASC,eAAT,CAA0BC,WAA1B,CAAuCC,UAAvC,CAAmD5B,QAAnD,CAA6DkB,WAA7D,CAA2E,CACvE,GAAIlD,QAAS,EAAb,CACA,GAAG2D,YAAYjG,MAAZ,EAAsB,CAAzB,CAA4B,CACxBsC,QAAQ6B,SAAS8B,WAAT,CAAsBC,UAAtB,CAAkC5B,QAAlC,CAA4C,IAA5C,CAAR,CACH,CAFD,IAGK,CACD,IAAI,GAAI6B,OAAQ,CAAhB,CAAmBA,MAAQF,YAAYjG,MAAvC,CAA+CmG,OAA/C,CAAwD,CACpD7D,QAAQ6B,SAAS8B,YAAYE,KAAZ,CAAT,CAA6BD,UAA7B,CAAyCT,oBAAoBQ,YAAYE,KAAZ,CAApB,CAAzC,CAAkF,KAAlF,CAAR,CACA7D,QAAQ8D,gBAAgBH,YAAYE,KAAZ,CAAhB,CAAoCL,oBAAoBN,WAApB,CAAgCU,UAAhC,CAApC,CAAR,CACA5D,QAAQsC,OAAOqB,YAAYE,KAAZ,CAAP,CAA0BD,UAA1B,CAAR,CACH,CACJ,CACD,MAAO5D,OAAP,CACH,CAED,QAAS8D,gBAAT,CAA2BhC,OAA3B,CAAoCoB,WAApC,CAAkD,CAC9C,GAAIlD,QAAS,EAAb,CAEA,GAAI8C,aAAcD,iBAAmBf,OAAnB,CAAlB,CAEA,GAAGgB,YAAc,CAAjB,CAAoB,CAChB,IAAK,GAAIC,GAAT,GAAejB,QAAf,CAAyB,CAErB,GAAGY,mBAAqBZ,OAArB,CAA8BiB,EAA9B,GAAsCG,aAAa,EAAb,EAAmB,CAACF,6BAA6BlB,OAA7B,CAAsCiB,EAAtC,CAA0CS,oBAAoBN,WAApB,CAAgCH,EAAhC,CAA1C,CAA7D,CACI,SAEJ,GAAIgB,QAASjC,QAAQiB,EAAR,CAAb,CAEA,GAAIf,UAAWmB,oBAAqBY,MAArB,CAAf,CAEA,GAAGA,QAAU,IAAV,EAAkBA,QAAU3I,SAA/B,CAA0C,CACtC4E,QAAQ6B,SAASkC,MAAT,CAAiBhB,EAAjB,CAAqBf,QAArB,CAA+B,IAA/B,CAAR,CACH,CAFD,IAIA,IAAG+B,iBAAkB9D,OAArB,CAA6B,CAEzB,GAAG8D,iBAAkB/F,MAArB,CAA4B,CACxBgC,QAAQ0D,eAAgBK,MAAhB,CAAwBhB,EAAxB,CAA4Bf,QAA5B,CAAsCkB,WAAtC,CAAR,CACH,CAFD,IAGK,IAAGa,iBAAkBzF,KAArB,CAA2B,CAC5B0B,QAAQ6B,SAASkC,MAAT,CAAiBhB,EAAjB,CAAqBf,QAArB,CAA+B,KAA/B,CAAR,CACAhC,QAAQ+D,OAAOC,WAAP,EAAR,CACAhE,QAAQsC,OAAOyB,MAAP,CAAchB,EAAd,CAAR,CACH,CAJI,IAKA,CACD,GAAIkB,mBAAoBpB,iBAAmBkB,MAAnB,CAAxB,CACA,GAAGE,kBAAoB,CAApB,EAAyBF,OAAOxC,MAAP,EAAe,IAAxC,EAAgDwC,OAAOrC,OAAP,EAAgB,IAAnE,CAAyE,CACrE1B,QAAQ6B,SAASkC,MAAT,CAAiBhB,EAAjB,CAAqBf,QAArB,CAA+B,KAA/B,CAAR,CACAhC,QAAQ8D,gBAAgBC,MAAhB,CAAwBP,oBAAoBN,WAApB,CAAgCH,EAAhC,CAAxB,CAAR,CACA/C,QAAQsC,OAAOyB,MAAP,CAAchB,EAAd,CAAR,CACH,CAJD,IAKK,CACD/C,QAAQ6B,SAASkC,MAAT,CAAiBhB,EAAjB,CAAqBf,QAArB,CAA+B,IAA/B,CAAR,CACH,CACJ,CACJ,CArBD,IAsBK,CACDhC,QAAQ6B,SAASkC,MAAT,CAAiBhB,EAAjB,CAAqBf,QAArB,CAA+B,KAA/B,CAAR,CACAhC,QAAQuD,oBAAoBQ,MAApB,CAAR,CACA/D,QAAQsC,OAAOyB,MAAP,CAAchB,EAAd,CAAR,CACH,CACJ,CACJ,CACD/C,QAAQuD,oBAAoBzB,OAApB,CAAR,CAEA,MAAO9B,OAAP,CACH,CAED,KAAKkE,cAAL,CAAsB,SAASC,SAAT,CAAoB,CACtC,GAAIC,YAAaC,OAAOC,aAAP,EAAwB,iBAAmBD,OAA5D,CACA,GAAIF,YAAc/I,SAAlB,CAA6B,CACzB,MAAO,KAAP,CACH,CACD,GAAImJ,OAAJ,CACA,GAAIF,OAAOG,SAAX,CAAsB,CAClB,GAAIC,QAAO,GAAIJ,QAAOG,SAAX,EAAX,CACA,GAAIE,eAAgB,IAApB,CACA,GAAI,CACAH,OAASE,OAAOE,eAAP,CAAwBR,SAAxB,CAAmC,UAAnC,CAAT,CACA,GAAGI,OAAOK,sBAAP,CAA8B,GAA9B,CAAmC,aAAnC,EAAkDlH,MAAlD,CAA2D,CAA9D,CAAiE,CAC7D6G,OAAS,IAAT,CACH,CACJ,CACD,MAAMM,GAAN,CAAW,CACPN,OAAS,IAAT,CACH,CACJ,CAZD,IAaK,CACD;AACA,GAAGJ,UAAUnF,OAAV,CAAkB,IAAlB,GAAyB,CAA5B,CAA+B,CAC3BmF,UAAYA,UAAU9B,MAAV,CAAkB8B,UAAUnF,OAAV,CAAkB,IAAlB,EAA0B,CAA5C,CAAZ,CACH,CACDuF,OAAO,GAAID,cAAJ,CAAkB,kBAAlB,CAAP,CACAC,OAAOO,KAAP,CAAa,OAAb,CACAP,OAAOQ,OAAP,CAAeZ,SAAf,EACH,CACD,MAAOI,OAAP,CACH,CA7BD,CA+BA,KAAKS,OAAL,CAAe,SAAS9G,IAAT,CAAe,CAC1B,GAAIA,OAAS9C,SAAT,EAAsB8C,MAAQ,IAAlC,CACI,MAAO,EAAP,CADJ,IAGA,IAAGA,eAAgBF,MAAnB,CACI,MAAOE,KAAP,CADJ,IAGI,OAAO,CAACA,IAAD,CAAP,CACP,CARD,CAUA,KAAK+G,aAAL,CAAqB,SAASC,EAAT,CAAa,CAC9B,GAAGA,aAAc5G,KAAjB,CACI,MAAO4G,IAAGlB,WAAH,EAAP,CADJ,IAGA,IAAG,MAAOkB,GAAP,GAAe,QAAlB,CACI,MAAO,IAAI5G,KAAJ,CAAS4G,EAAT,EAAalB,WAAb,EAAP,CADJ,IAGI,OAAO,KAAP,CACP,CARD,CAUA,KAAKmB,UAAL,CAAkB,SAASjH,IAAT,CAAe,CAC7B,GAAG,MAAOA,KAAP,EAAgB,QAAnB,CAA6B,CACzB,MAAOD,iBAAgBC,IAAhB,CAAP,CACH,CAFD,IAII,OAAOA,KAAP,CACP,CAND,CAQA,KAAKkH,QAAL,CAAgB,SAAUb,MAAV,CAAkB,CAC9B,MAAOzE,kBAAmByE,MAAnB,CAAP,CACH,CAFD,CAIA,KAAKc,YAAL,CAAoB,SAAUlB,SAAV,CAAqB,CACrC,GAAII,QAAS,KAAKL,cAAL,CAAoBC,SAApB,CAAb,CACA,GAAGI,QAAQ,IAAX,CACI,MAAO,MAAKa,QAAL,CAAcb,MAAd,CAAP,CADJ,IAGI,OAAO,KAAP,CACP,CAND,CAQA,KAAKe,YAAL,CAAoB,SAAUxD,OAAV,CAAmB,CACnC,MAAOgC,iBAAkBhC,OAAlB,CAA2B,EAA3B,CAAP,CACH,CAFD,CAIA,KAAKyD,QAAL,CAAgB,SAAUzD,OAAV,CAAmB,CAC/B,GAAIqC,WAAY,KAAKmB,YAAL,CAAmBxD,OAAnB,CAAhB,CACA,MAAO,MAAKoC,cAAL,CAAoBC,SAApB,CAAP,CACH,CAHD,CAKA,KAAKqB,UAAL,CAAkB,UAAY,CAC1B,MAAOxK,QAAP,CACH,CAFD,CAGH,C,gBAEcF,I","file":"xml2json.js","sourcesContent":["/*\r\n Copyright 2011-2013 Abdulla Abdurakhmanov\r\n Original sources are available at https://code.google.com/p/x2js/\r\n\r\n Licensed under the Apache License, Version 2.0 (the \"License\");\r\n you may not use this file except in compliance with the License.\r\n You may obtain a copy of the License at\r\n\r\n http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n Unless required by applicable law or agreed to in writing, software\r\n distributed under the License is distributed on an \"AS IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n See the License for the specific language governing permissions and\r\n limitations under the License.\r\n */\r\n\r\n/*\r\n  Further modified for dashjs to:\r\n  - keep track of children nodes in order in attribute __children.\r\n  - add type conversion matchers\r\n  - re-add ignoreRoot\r\n  - allow zero-length attributePrefix\r\n  - don't add white-space text nodes\r\n  - remove explicit RequireJS support\r\n*/\r\n\r\nfunction X2JS(config) {\r\n    'use strict';\r\n\r\n    var VERSION = \"1.2.0\";\r\n\r\n    config = config || {};\r\n    initConfigDefaults();\r\n    initRequiredPolyfills();\r\n\r\n    function initConfigDefaults() {\r\n        if(config.escapeMode === undefined) {\r\n            config.escapeMode = true;\r\n        }\r\n\r\n        if (config.attributePrefix === undefined) {\r\n            config.attributePrefix = \"_\";\r\n        }\r\n\r\n        config.arrayAccessForm = config.arrayAccessForm || \"none\";\r\n        config.emptyNodeForm = config.emptyNodeForm || \"text\";\r\n\r\n        if(config.enableToStringFunc === undefined) {\r\n            config.enableToStringFunc = true;\r\n        }\r\n        config.arrayAccessFormPaths = config.arrayAccessFormPaths || [];\r\n        if(config.skipEmptyTextNodesForObj === undefined) {\r\n            config.skipEmptyTextNodesForObj = true;\r\n        }\r\n        if(config.stripWhitespaces === undefined) {\r\n            config.stripWhitespaces = true;\r\n        }\r\n        config.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];\r\n\r\n        if(config.useDoubleQuotes === undefined) {\r\n            config.useDoubleQuotes = false;\r\n        }\r\n\r\n        config.xmlElementsFilter = config.xmlElementsFilter || [];\r\n        config.jsonPropertiesFilter = config.jsonPropertiesFilter || [];\r\n\r\n        if(config.keepCData === undefined) {\r\n            config.keepCData = false;\r\n        }\r\n\r\n        if (config.ignoreRoot === undefined) {\r\n            config.ignoreRoot = false;\r\n        }\r\n    }\r\n\r\n    var DOMNodeTypes = {\r\n        ELEMENT_NODE \t   : 1,\r\n        TEXT_NODE    \t   : 3,\r\n        CDATA_SECTION_NODE : 4,\r\n        COMMENT_NODE\t   : 8,\r\n        DOCUMENT_NODE \t   : 9\r\n    };\r\n\r\n    function initRequiredPolyfills() {\r\n    }\r\n\r\n    function getNodeLocalName( node ) {\r\n        var nodeLocalName = node.localName;\r\n        if(nodeLocalName == null) // Yeah, this is IE!!\r\n            nodeLocalName = node.baseName;\r\n        if(nodeLocalName == null || nodeLocalName==\"\") // ==\"\" is IE too\r\n            nodeLocalName = node.nodeName;\r\n        return nodeLocalName;\r\n    }\r\n\r\n    function getNodePrefix(node) {\r\n        return node.prefix;\r\n    }\r\n\r\n    function escapeXmlChars(str) {\r\n        if(typeof(str) == \"string\")\r\n            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\r\n        else\r\n            return str;\r\n    }\r\n\r\n    function unescapeXmlChars(str) {\r\n        return str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&amp;/g, '&');\r\n    }\r\n\r\n    function checkInStdFiltersArrayForm(stdFiltersArrayForm, obj, name, path) {\r\n        var idx = 0;\r\n        for(; idx < stdFiltersArrayForm.length; idx++) {\r\n            var filterPath = stdFiltersArrayForm[idx];\r\n            if( typeof filterPath === \"string\" ) {\r\n                if(filterPath == path)\r\n                    break;\r\n            }\r\n            else\r\n            if( filterPath instanceof RegExp) {\r\n                if(filterPath.test(path))\r\n                    break;\r\n            }\r\n            else\r\n            if( typeof filterPath === \"function\") {\r\n                if(filterPath(obj, name, path))\r\n                    break;\r\n            }\r\n        }\r\n        return idx!=stdFiltersArrayForm.length;\r\n    }\r\n\r\n    function toArrayAccessForm(obj, childName, path) {\r\n        switch(config.arrayAccessForm) {\r\n            case \"property\":\r\n                if(!(obj[childName] instanceof Array))\r\n                    obj[childName+\"_asArray\"] = [obj[childName]];\r\n                else\r\n                    obj[childName+\"_asArray\"] = obj[childName];\r\n                break;\r\n            /*case \"none\":\r\n                break;*/\r\n        }\r\n\r\n        if(!(obj[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {\r\n            if(checkInStdFiltersArrayForm(config.arrayAccessFormPaths, obj, childName, path)) {\r\n                obj[childName] = [obj[childName]];\r\n            }\r\n        }\r\n    }\r\n\r\n    function fromXmlDateTime(prop) {\r\n        // Implementation based up on http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object\r\n        // Improved to support full spec and optional parts\r\n        var bits = prop.split(/[-T:+Z]/g);\r\n\r\n        var d = new Date(bits[0], bits[1]-1, bits[2]);\r\n        var secondBits = bits[5].split(\"\\.\");\r\n        d.setHours(bits[3], bits[4], secondBits[0]);\r\n        if(secondBits.length>1)\r\n            d.setMilliseconds(secondBits[1]);\r\n\r\n        // Get supplied time zone offset in minutes\r\n        if(bits[6] && bits[7]) {\r\n            var offsetMinutes = bits[6] * 60 + Number(bits[7]);\r\n            var sign = /\\d\\d-\\d\\d:\\d\\d$/.test(prop)? '-' : '+';\r\n\r\n            // Apply the sign\r\n            offsetMinutes = 0 + (sign == '-'? -1 * offsetMinutes : offsetMinutes);\r\n\r\n            // Apply offset and local timezone\r\n            d.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset())\r\n        }\r\n        else\r\n            if(prop.indexOf(\"Z\", prop.length - 1) !== -1) {\r\n                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));\r\n            }\r\n\r\n        // d is now a local time equivalent to the supplied time\r\n        return d;\r\n    }\r\n\r\n    function checkFromXmlDateTimePaths(value, childName, fullPath) {\r\n        if(config.datetimeAccessFormPaths.length > 0) {\r\n            var path = fullPath.split(\"\\.#\")[0];\r\n            if(checkInStdFiltersArrayForm(config.datetimeAccessFormPaths, value, childName, path)) {\r\n                return fromXmlDateTime(value);\r\n            }\r\n            else\r\n                return value;\r\n        }\r\n        else\r\n            return value;\r\n    }\r\n\r\n    function checkXmlElementsFilter(obj, childType, childName, childPath) {\r\n        if( childType == DOMNodeTypes.ELEMENT_NODE && config.xmlElementsFilter.length > 0) {\r\n            return checkInStdFiltersArrayForm(config.xmlElementsFilter, obj, childName, childPath);\r\n        }\r\n        else\r\n            return true;\r\n    }\r\n\r\n    function parseDOMChildren( node, path ) {\r\n        if(node.nodeType == DOMNodeTypes.DOCUMENT_NODE) {\r\n            var result = new Object;\r\n            var nodeChildren = node.childNodes;\r\n            // Alternative for firstElementChild which is not supported in some environments\r\n            for(var cidx=0; cidx <nodeChildren.length; cidx++) {\r\n                var child = nodeChildren[cidx];\r\n                if(child.nodeType == DOMNodeTypes.ELEMENT_NODE) {\r\n                    if (config.ignoreRoot) {\r\n                        result = parseDOMChildren(child);\r\n                    } else {\r\n                        result = {};\r\n                        var childName = getNodeLocalName(child);\r\n                        result[childName] = parseDOMChildren(child);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else\r\n        if(node.nodeType == DOMNodeTypes.ELEMENT_NODE) {\r\n            var result = new Object;\r\n            result.__cnt=0;\r\n\r\n            var children = [];\r\n            var nodeChildren = node.childNodes;\r\n\r\n            // Children nodes\r\n            for(var cidx=0; cidx <nodeChildren.length; cidx++) {\r\n                var child = nodeChildren[cidx];\r\n                var childName = getNodeLocalName(child);\r\n\r\n                if(child.nodeType!= DOMNodeTypes.COMMENT_NODE) {\r\n                    var childPath = path+\".\"+childName;\r\n                    if (checkXmlElementsFilter(result,child.nodeType,childName,childPath)) {\r\n                        result.__cnt++;\r\n                        if(result[childName] == null) {\r\n                            var c = parseDOMChildren(child, childPath);\r\n                            if (childName != \"#text\" || /[^\\s]/.test(c)) {\r\n                                var o = {};\r\n                                o[childName] = c;\r\n                                children.push(o);\r\n                            }\r\n                            result[childName] = c;\r\n                            toArrayAccessForm(result, childName, childPath);\r\n                        }\r\n                        else {\r\n                            if(result[childName] != null) {\r\n                                if( !(result[childName] instanceof Array)) {\r\n                                    result[childName] = [result[childName]];\r\n                                    toArrayAccessForm(result, childName, childPath);\r\n                                }\r\n                            }\r\n\r\n                            var c = parseDOMChildren(child, childPath);\r\n                            if (childName != \"#text\" || /[^\\s]/.test(c)) { // Don't add white-space text nodes\r\n                                var o = {};\r\n                                o[childName] = c;\r\n                                children.push( o );\r\n                            }\r\n                            (result[childName])[result[childName].length] = c;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            result.__children = children;\r\n\r\n            // Attributes\r\n            var nodeLocalName = getNodeLocalName(node)\r\n            for(var aidx=0; aidx <node.attributes.length; aidx++) {\r\n                var attr = node.attributes[aidx];\r\n                result.__cnt++;\r\n\r\n                var value2 = attr.value;\r\n                for(var m=0, ml=config.matchers.length; m < ml; m++) {\r\n                    var matchobj = config.matchers[m];\r\n                    if (matchobj.test(attr, nodeLocalName))\r\n                        value2 = matchobj.converter(attr.value);\r\n                }\r\n\r\n                result[config.attributePrefix+attr.name]=value2;\r\n            }\r\n\r\n            // Node namespace prefix\r\n            var nodePrefix = getNodePrefix(node);\r\n            if(nodePrefix!=null && nodePrefix!=\"\") {\r\n                result.__cnt++;\r\n                result.__prefix=nodePrefix;\r\n            }\r\n\r\n            if(result[\"#text\"]!=null) {\r\n                result.__text = result[\"#text\"];\r\n                if(result.__text instanceof Array) {\r\n                    result.__text = result.__text.join(\"\\n\");\r\n                }\r\n                //if(config.escapeMode)\r\n                //\tresult.__text = unescapeXmlChars(result.__text);\r\n                if(config.stripWhitespaces)\r\n                    result.__text = result.__text.trim();\r\n                delete result[\"#text\"];\r\n                if(config.arrayAccessForm==\"property\")\r\n                    delete result[\"#text_asArray\"];\r\n                result.__text = checkFromXmlDateTimePaths(result.__text, childName, path+\".\"+childName);\r\n            }\r\n            if(result[\"#cdata-section\"]!=null) {\r\n                result.__cdata = result[\"#cdata-section\"];\r\n                delete result[\"#cdata-section\"];\r\n                if(config.arrayAccessForm==\"property\")\r\n                    delete result[\"#cdata-section_asArray\"];\r\n            }\r\n\r\n            if( result.__cnt == 0 && config.emptyNodeForm==\"text\" ) {\r\n                result = '';\r\n            }\r\n            else\r\n            if( result.__cnt == 1 && result.__text!=null  ) {\r\n                result = result.__text;\r\n            }\r\n            else\r\n            if( result.__cnt == 1 && result.__cdata!=null && !config.keepCData  ) {\r\n                result = result.__cdata;\r\n            }\r\n            else\r\n            if ( result.__cnt > 1 && result.__text!=null && config.skipEmptyTextNodesForObj) {\r\n                if( (config.stripWhitespaces && result.__text==\"\") || (result.__text.trim()==\"\")) {\r\n                    delete result.__text;\r\n                }\r\n            }\r\n            delete result.__cnt;\r\n\r\n            if( config.enableToStringFunc && (result.__text!=null || result.__cdata!=null )) {\r\n                result.toString = function() {\r\n                    return (this.__text!=null? this.__text:'')+( this.__cdata!=null ? this.__cdata:'');\r\n                };\r\n            }\r\n\r\n            return result;\r\n        }\r\n        else\r\n        if(node.nodeType == DOMNodeTypes.TEXT_NODE || node.nodeType == DOMNodeTypes.CDATA_SECTION_NODE) {\r\n            return node.nodeValue;\r\n        }\r\n    }\r\n\r\n    function startTag(jsonObj, element, attrList, closed) {\r\n        var resultStr = \"<\"+ ( (jsonObj!=null && jsonObj.__prefix!=null)? (jsonObj.__prefix+\":\"):\"\") + element;\r\n        if(attrList!=null) {\r\n            for(var aidx = 0; aidx < attrList.length; aidx++) {\r\n                var attrName = attrList[aidx];\r\n                var attrVal = jsonObj[attrName];\r\n                if(config.escapeMode)\r\n                    attrVal=escapeXmlChars(attrVal);\r\n                resultStr+=\" \"+attrName.substr(config.attributePrefix.length)+\"=\";\r\n                if(config.useDoubleQuotes)\r\n                    resultStr+='\"'+attrVal+'\"';\r\n                else\r\n                    resultStr+=\"'\"+attrVal+\"'\";\r\n            }\r\n        }\r\n        if(!closed)\r\n            resultStr+=\">\";\r\n        else\r\n            resultStr+=\"/>\";\r\n        return resultStr;\r\n    }\r\n\r\n    function endTag(jsonObj,elementName) {\r\n        return \"</\"+ (jsonObj.__prefix!=null? (jsonObj.__prefix+\":\"):\"\")+elementName+\">\";\r\n    }\r\n\r\n    function endsWith(str, suffix) {\r\n        return str.indexOf(suffix, str.length - suffix.length) !== -1;\r\n    }\r\n\r\n    function jsonXmlSpecialElem ( jsonObj, jsonObjField ) {\r\n        if((config.arrayAccessForm==\"property\" && endsWith(jsonObjField.toString(),(\"_asArray\")))\r\n                || jsonObjField.toString().indexOf(config.attributePrefix)==0\r\n                || jsonObjField.toString().indexOf(\"__\")==0\r\n                || (jsonObj[jsonObjField] instanceof Function) )\r\n            return true;\r\n        else\r\n            return false;\r\n    }\r\n\r\n    function jsonXmlElemCount ( jsonObj ) {\r\n        var elementsCnt = 0;\r\n        if(jsonObj instanceof Object ) {\r\n            for( var it in jsonObj  ) {\r\n                if(jsonXmlSpecialElem ( jsonObj, it) )\r\n                    continue;\r\n                elementsCnt++;\r\n            }\r\n        }\r\n        return elementsCnt;\r\n    }\r\n\r\n    function checkJsonObjPropertiesFilter(jsonObj, propertyName, jsonObjPath) {\r\n        return config.jsonPropertiesFilter.length == 0\r\n            || jsonObjPath==\"\"\r\n            || checkInStdFiltersArrayForm(config.jsonPropertiesFilter, jsonObj, propertyName, jsonObjPath);\r\n    }\r\n\r\n    function parseJSONAttributes ( jsonObj ) {\r\n        var attrList = [];\r\n        if(jsonObj instanceof Object ) {\r\n            for( var ait in jsonObj  ) {\r\n                if(ait.toString().indexOf(\"__\")== -1 && ait.toString().indexOf(config.attributePrefix)==0) {\r\n                    attrList.push(ait);\r\n                }\r\n            }\r\n        }\r\n        return attrList;\r\n    }\r\n\r\n    function parseJSONTextAttrs ( jsonTxtObj ) {\r\n        var result =\"\";\r\n\r\n        if(jsonTxtObj.__cdata!=null) {\r\n            result+=\"<![CDATA[\"+jsonTxtObj.__cdata+\"]]>\";\r\n        }\r\n\r\n        if(jsonTxtObj.__text!=null) {\r\n            if(config.escapeMode)\r\n                result+=escapeXmlChars(jsonTxtObj.__text);\r\n            else\r\n                result+=jsonTxtObj.__text;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function parseJSONTextObject ( jsonTxtObj ) {\r\n        var result =\"\";\r\n\r\n        if( jsonTxtObj instanceof Object ) {\r\n            result+=parseJSONTextAttrs ( jsonTxtObj );\r\n        }\r\n        else\r\n            if(jsonTxtObj!=null) {\r\n                if(config.escapeMode)\r\n                    result+=escapeXmlChars(jsonTxtObj);\r\n                else\r\n                    result+=jsonTxtObj;\r\n            }\r\n\r\n        return result;\r\n    }\r\n\r\n    function getJsonPropertyPath(jsonObjPath, jsonPropName) {\r\n        if (jsonObjPath===\"\") {\r\n            return jsonPropName;\r\n        }\r\n        else\r\n            return jsonObjPath+\".\"+jsonPropName;\r\n    }\r\n\r\n    function parseJSONArray ( jsonArrRoot, jsonArrObj, attrList, jsonObjPath ) {\r\n        var result = \"\";\r\n        if(jsonArrRoot.length == 0) {\r\n            result+=startTag(jsonArrRoot, jsonArrObj, attrList, true);\r\n        }\r\n        else {\r\n            for(var arIdx = 0; arIdx < jsonArrRoot.length; arIdx++) {\r\n                result+=startTag(jsonArrRoot[arIdx], jsonArrObj, parseJSONAttributes(jsonArrRoot[arIdx]), false);\r\n                result+=parseJSONObject(jsonArrRoot[arIdx], getJsonPropertyPath(jsonObjPath,jsonArrObj));\r\n                result+=endTag(jsonArrRoot[arIdx],jsonArrObj);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function parseJSONObject ( jsonObj, jsonObjPath ) {\r\n        var result = \"\";\r\n\r\n        var elementsCnt = jsonXmlElemCount ( jsonObj );\r\n\r\n        if(elementsCnt > 0) {\r\n            for( var it in jsonObj ) {\r\n\r\n                if(jsonXmlSpecialElem ( jsonObj, it) || (jsonObjPath!=\"\" && !checkJsonObjPropertiesFilter(jsonObj, it, getJsonPropertyPath(jsonObjPath,it))) )\r\n                    continue;\r\n\r\n                var subObj = jsonObj[it];\r\n\r\n                var attrList = parseJSONAttributes( subObj )\r\n\r\n                if(subObj == null || subObj == undefined) {\r\n                    result+=startTag(subObj, it, attrList, true);\r\n                }\r\n                else\r\n                if(subObj instanceof Object) {\r\n\r\n                    if(subObj instanceof Array) {\r\n                        result+=parseJSONArray( subObj, it, attrList, jsonObjPath );\r\n                    }\r\n                    else if(subObj instanceof Date) {\r\n                        result+=startTag(subObj, it, attrList, false);\r\n                        result+=subObj.toISOString();\r\n                        result+=endTag(subObj,it);\r\n                    }\r\n                    else {\r\n                        var subObjElementsCnt = jsonXmlElemCount ( subObj );\r\n                        if(subObjElementsCnt > 0 || subObj.__text!=null || subObj.__cdata!=null) {\r\n                            result+=startTag(subObj, it, attrList, false);\r\n                            result+=parseJSONObject(subObj, getJsonPropertyPath(jsonObjPath,it));\r\n                            result+=endTag(subObj,it);\r\n                        }\r\n                        else {\r\n                            result+=startTag(subObj, it, attrList, true);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    result+=startTag(subObj, it, attrList, false);\r\n                    result+=parseJSONTextObject(subObj);\r\n                    result+=endTag(subObj,it);\r\n                }\r\n            }\r\n        }\r\n        result+=parseJSONTextObject(jsonObj);\r\n\r\n        return result;\r\n    }\r\n\r\n    this.parseXmlString = function(xmlDocStr) {\r\n        var isIEParser = window.ActiveXObject || \"ActiveXObject\" in window;\r\n        if (xmlDocStr === undefined) {\r\n            return null;\r\n        }\r\n        var xmlDoc;\r\n        if (window.DOMParser) {\r\n            var parser=new window.DOMParser();\r\n            var parsererrorNS = null;\r\n            try {\r\n                xmlDoc = parser.parseFromString( xmlDocStr, \"text/xml\" );\r\n                if(xmlDoc.getElementsByTagNameNS(\"*\", \"parsererror\").length > 0) {\r\n                    xmlDoc = null;\r\n                }\r\n            }\r\n            catch(err) {\r\n                xmlDoc = null;\r\n            }\r\n        }\r\n        else {\r\n            // IE :(\r\n            if(xmlDocStr.indexOf(\"<?\")==0) {\r\n                xmlDocStr = xmlDocStr.substr( xmlDocStr.indexOf(\"?>\") + 2 );\r\n            }\r\n            xmlDoc=new ActiveXObject(\"Microsoft.XMLDOM\");\r\n            xmlDoc.async=\"false\";\r\n            xmlDoc.loadXML(xmlDocStr);\r\n        }\r\n        return xmlDoc;\r\n    };\r\n\r\n    this.asArray = function(prop) {\r\n        if (prop === undefined || prop == null)\r\n            return [];\r\n        else\r\n        if(prop instanceof Array)\r\n            return prop;\r\n        else\r\n            return [prop];\r\n    };\r\n\r\n    this.toXmlDateTime = function(dt) {\r\n        if(dt instanceof Date)\r\n            return dt.toISOString();\r\n        else\r\n        if(typeof(dt) === 'number' )\r\n            return new Date(dt).toISOString();\r\n        else\r\n            return null;\r\n    };\r\n\r\n    this.asDateTime = function(prop) {\r\n        if(typeof(prop) == \"string\") {\r\n            return fromXmlDateTime(prop);\r\n        }\r\n        else\r\n            return prop;\r\n    };\r\n\r\n    this.xml2json = function (xmlDoc) {\r\n        return parseDOMChildren ( xmlDoc );\r\n    };\r\n\r\n    this.xml_str2json = function (xmlDocStr) {\r\n        var xmlDoc = this.parseXmlString(xmlDocStr);\r\n        if(xmlDoc!=null)\r\n            return this.xml2json(xmlDoc);\r\n        else\r\n            return null;\r\n    };\r\n\r\n    this.json2xml_str = function (jsonObj) {\r\n        return parseJSONObject ( jsonObj, \"\" );\r\n    };\r\n\r\n    this.json2xml = function (jsonObj) {\r\n        var xmlDocStr = this.json2xml_str (jsonObj);\r\n        return this.parseXmlString(xmlDocStr);\r\n    };\r\n\r\n    this.getVersion = function () {\r\n        return VERSION;\r\n    };\r\n}\r\n\r\nexport default X2JS;\r\n"]}
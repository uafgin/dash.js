{"version":3,"sources":["../../../../../../src/dash/parser/matchers/StringMatcher.js"],"names":["StringMatcher","attr","nodeName","stringAttrsInElements","DashConstants","MPD","ID","PROFILES","PERIOD","BASE_URL","SERVICE_LOCATION","BYTE_RANGE","SEGMENT_BASE","INDEX_RANGE","INITIALIZATION","RANGE","REPRESENTATION_INDEX","SEGMENT_LIST","BITSTREAM_SWITCHING","SEGMENT_URL","MEDIA_RANGE","SEGMENT_TEMPLATE","MEDIA","INDEX","INITIALIZATION_MINUS","BITSTREAM_SWITCHING_MINUS","ASSET_IDENTIFIER","VALUE","EVENT_STREAM","ADAPTATION_SET","MIME_TYPE","SEGMENT_PROFILES","CODECS","CONTENT_TYPE","FRAME_PACKING","AUDIO_CHANNEL_CONFIGURATION","CONTENT_PROTECTION","ESSENTIAL_PROPERTY","SUPPLEMENTAL_PROPERTY","INBAND_EVENT_STREAM","ACCESSIBILITY","ROLE","RATING","VIEWPOINT","CONTENT_COMPONENT","REPRESENTATION","DEPENDENCY_ID","MEDIA_STREAM_STRUCTURE_ID","SUBSET","METRICS","METRICS_MINUS","REPORTING","hasOwnProperty","attrNames","undefined","indexOf","name","String","str","BaseMatcher"],"mappings":"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","file":"StringMatcher.js","sourcesContent":["/**\r\n * The copyright in this software is being made available under the BSD License,\r\n * included below. This software may be subject to other third party and contributor\r\n * rights, including patent rights, and no such rights are granted under this license.\r\n *\r\n * Copyright (c) 2013, Dash Industry Forum.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *  * Redistributions of source code must retain the above copyright notice, this\r\n *  list of conditions and the following disclaimer.\r\n *  * Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation and/or\r\n *  other materials provided with the distribution.\r\n *  * Neither the name of Dash Industry Forum nor the names of its\r\n *  contributors may be used to endorse or promote products derived from this software\r\n *  without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\r\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\r\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n/**\r\n * @classdesc Matches and converts xs:string to string, but only for specific attributes on specific nodes\r\n */\r\nimport BaseMatcher from './BaseMatcher';\r\nimport DashConstants from '../../constants/DashConstants';\r\n\r\nclass StringMatcher extends BaseMatcher {\r\n    constructor() {\r\n        super(\r\n            (attr, nodeName) => {\r\n                const stringAttrsInElements = {\r\n                    [DashConstants.MPD]:                            [ DashConstants.ID, DashConstants.PROFILES ],\r\n                    [DashConstants.PERIOD]:                         [ DashConstants.ID ],\r\n                    [DashConstants.BASE_URL]:                       [ DashConstants.SERVICE_LOCATION, DashConstants.BYTE_RANGE ],\r\n                    [DashConstants.SEGMENT_BASE]:                   [ DashConstants.INDEX_RANGE ],\r\n                    [DashConstants.INITIALIZATION]:                 [ DashConstants.RANGE ],\r\n                    [DashConstants.REPRESENTATION_INDEX]:           [ DashConstants.RANGE ],\r\n                    [DashConstants.SEGMENT_LIST]:                   [ DashConstants.INDEX_RANGE ],\r\n                    [DashConstants.BITSTREAM_SWITCHING]:            [ DashConstants.RANGE ],\r\n                    [DashConstants.SEGMENT_URL]:                    [ DashConstants.MEDIA_RANGE, DashConstants.INDEX_RANGE ],\r\n                    [DashConstants.SEGMENT_TEMPLATE]:               [ DashConstants.INDEX_RANGE, DashConstants.MEDIA, DashConstants.INDEX, DashConstants.INITIALIZATION_MINUS, DashConstants.BITSTREAM_SWITCHING_MINUS ],\r\n                    [DashConstants.ASSET_IDENTIFIER]:               [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.EVENT_STREAM]:                   [ DashConstants.VALUE ],\r\n                    [DashConstants.ADAPTATION_SET]:                 [ DashConstants.PROFILES, DashConstants.MIME_TYPE, DashConstants.SEGMENT_PROFILES, DashConstants.CODECS, DashConstants.CONTENT_TYPE ],\r\n                    [DashConstants.FRAME_PACKING]:                  [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.AUDIO_CHANNEL_CONFIGURATION]:    [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.CONTENT_PROTECTION]:             [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.ESSENTIAL_PROPERTY]:             [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.SUPPLEMENTAL_PROPERTY]:          [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.INBAND_EVENT_STREAM]:            [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.ACCESSIBILITY]:                  [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.ROLE]:                           [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.RATING]:                         [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.VIEWPOINT]:                      [ DashConstants.VALUE, DashConstants.ID ],\r\n                    [DashConstants.CONTENT_COMPONENT]:              [ DashConstants.CONTENT_TYPE ],\r\n                    [DashConstants.REPRESENTATION]:                 [ DashConstants.ID, DashConstants.DEPENDENCY_ID, DashConstants.MEDIA_STREAM_STRUCTURE_ID ],\r\n                    [DashConstants.SUBSET]:                         [ DashConstants.ID ],\r\n                    [DashConstants.METRICS]:                        [ DashConstants.METRICS_MINUS ],\r\n                    [DashConstants.REPORTING]:                      [ DashConstants.VALUE, DashConstants.ID ]\r\n                };\r\n                if (stringAttrsInElements.hasOwnProperty(nodeName)) {\r\n                    let attrNames = stringAttrsInElements[nodeName];\r\n                    if (attrNames !== undefined) {\r\n                        return attrNames.indexOf(attr.name) >= 0;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            str => String(str)\r\n        );\r\n    }\r\n}\r\n\r\nexport default StringMatcher;\r\n"]}